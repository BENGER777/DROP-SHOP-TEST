<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DROP SHOP - –ö–æ—Ä–∑–∏–Ω–∞</title>
<style>
  body {
    margin: 0;
    font-family: 'Georgia', serif;
    background-color: #fff;
    color: #000;
  }

  header {
    background-color: #000;
    padding: 20px;
    position: relative;
  }

  header h1 {
    margin: 0;
    font-family: 'Helvetica Neue', sans-serif;
    font-weight: 700;
    color: #fff;
    font-size: 2em;
  }

  nav {
    margin-top: 10px;
  }

  nav a {
    color: #fff;
    margin-right: 20px;
    text-decoration: none;
    font-weight: 600;
  }

  nav a:hover {
    text-decoration: underline;
  }

  .cart-count {
    position: absolute;
    top: 20px;
    right: 20px;
    background: #fff;
    color: #000;
    border-radius: 50%;
    width: 25px;
    height: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.9em;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
  }

  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    flex-wrap: wrap;
    gap: 20px;
  }

  .page-title {
    font-size: 2.2em;
    font-weight: 700;
    margin: 0;
  }

  .empty-cart {
    text-align: center;
    padding: 60px 20px;
    background: #f9f9f9;
    border-radius: 12px;
    margin-bottom: 30px;
  }

  .empty-cart h3 {
    font-size: 1.5em;
    margin-bottom: 15px;
    color: #333;
  }

  .empty-cart p {
    color: #666;
    margin-bottom: 25px;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }

  .shop-now-btn {
    display: inline-block;
    background: #000;
    color: white;
    padding: 12px 30px;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s;
  }

  .shop-now-btn:hover {
    background: #333;
    transform: translateY(-2px);
  }

  .cart-layout {
    display: flex;
    gap: 30px;
  }

  .cart-items {
    flex: 3;
  }

  .cart-summary {
    flex: 1;
    background: #f8f8f8;
    padding: 25px;
    border-radius: 12px;
    height: fit-content;
    position: sticky;
    top: 30px;
  }

  .cart-item {
    display: flex;
    background: white;
    border: 1px solid #eee;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    transition: all 0.3s;
    position: relative;
  }

  .cart-item:hover {
    border-color: #000;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  }

  .item-image {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 8px;
    margin-right: 20px;
  }

  .item-details {
    flex: 1;
  }

  .item-name {
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 8px;
  }

  .item-size {
    color: #666;
    font-size: 0.9em;
    margin-bottom: 10px;
  }

  .item-price {
    font-weight: 600;
    color: #b12704;
    font-size: 1.1em;
  }

  .item-quantity {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 15px;
  }

  .quantity-btn {
    width: 30px;
    height: 30px;
    border: 1px solid #ddd;
    background: white;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1.2em;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .quantity-btn:hover {
    border-color: #000;
    background: #f8f8f8;
  }

  .quantity-input {
    width: 50px;
    text-align: center;
    padding: 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1em;
  }

  .item-total {
    text-align: right;
    margin-left: 20px;
    min-width: 120px;
  }

  .total-price {
    font-size: 1.3em;
    font-weight: 700;
    color: #b12704;
    margin-bottom: 5px;
  }

  .per-item {
    font-size: 0.9em;
    color: #666;
  }

  .remove-item {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 1.5em;
    cursor: pointer;
    color: #999;
    transition: color 0.3s;
  }

  .remove-item:hover {
    color: #ff4757;
  }

  .summary-title {
    font-size: 1.4em;
    font-weight: 700;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #000;
  }

  .summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid #eee;
  }

  .summary-row.total {
    font-weight: 700;
    font-size: 1.2em;
    border-bottom: 2px solid #000;
    padding-top: 15px;
    margin-top: 15px;
  }

  .checkout-btn {
    width: 100%;
    background: #000;
    color: white;
    border: none;
    padding: 15px;
    border-radius: 8px;
    font-size: 1.1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 20px;
  }

  .checkout-btn:hover {
    background: #333;
    transform: translateY(-2px);
  }

  .checkout-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
  }

  .continue-shopping {
    display: inline-block;
    text-align: center;
    width: 100%;
    margin-top: 15px;
    color: #666;
    text-decoration: none;
    transition: color 0.3s;
  }

  .continue-shopping:hover {
    color: #000;
  }

  .cart-actions {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #eee;
    flex-wrap: wrap;
    gap: 15px;
  }

  .clear-cart-btn {
    background: none;
    border: 1px solid #ddd;
    color: #666;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .clear-cart-btn:hover {
    border-color: #ff4757;
    color: #ff4757;
  }

  .notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #2ecc71;
    color: white;
    padding: 15px 25px;
    border-radius: 8px;
    z-index: 1000;
    animation: slideIn 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }

  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  @keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
  }

  @media (max-width: 992px) {
    .cart-layout {
      flex-direction: column;
    }
    
    .cart-summary {
      position: static;
    }
    
    .cart-item {
      flex-direction: column;
    }
    
    .item-image {
      width: 100%;
      height: 200px;
      margin-right: 0;
      margin-bottom: 15px;
    }
    
    .item-total {
      text-align: left;
      margin-left: 0;
      margin-top: 15px;
    }
    
    .remove-item {
      top: 10px;
      right: 10px;
      background: rgba(255,255,255,0.9);
      padding: 5px;
      border-radius: 4px;
    }
  }

  @media (max-width: 768px) {
    .container {
      padding: 20px 15px;
    }
    
    .page-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }
    
    .page-title {
      font-size: 1.8em;
    }
  }
</style>
</head>
<body>

<header>
  <h1>DROP SHOP</h1>
  <nav>
    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="about.html">–û –Ω–∞—Å</a>
    <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a>
    <a href="cart.html">–ö–æ—Ä–∑–∏–Ω–∞</a>
  </nav>
  <div class="cart-count" id="cartCount">0</div>
</header>

<div class="container">
  <div class="page-header">
    <h1 class="page-title">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>
    <div style="color: #666; font-size: 0.9em;">
      <span id="itemCount">0 —Ç–æ–≤–∞—Ä–æ–≤</span> ‚Ä¢ <span id="totalItems">0 —à—Ç.</span>
    </div>
  </div>

  <div id="cartContainer">
    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
  </div>
</div>

<script>
  const productImages = {
    101: "https://cdn-img.thepoizon.ru/pro-img/cut-img/20251208/01211522f9a04a2598634b90b282dc62.jpg?x-oss-process=image/format,webp/resize,w_800",
    102: "https://cdn-img.thepoizon.ru/pro-img/cut-img/20251211/02b5fd522d944e47b5ad896328d287bb.jpg?x-oss-process=image/format,webp/resize,w_800",
    103: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?auto=format&fit=crop&w=400&h=400&q=80",
    104: "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?auto=format&fit=crop&w=400&h=400&q=80",
    105: "https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?auto=format&fit=crop&w=400&h=400&q=80",
    106: "https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?auto=format&fit=crop&w=400&h=400&q=80"
  };

  let cart = JSON.parse(localStorage.getItem('cart')) || {};

  function updateCartCount() {
    const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cartCount').textContent = totalItems;
  }

  function showNotification(message, duration = 3000) {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideOut 0.3s ease';
      setTimeout(() => notification.remove(), 300);
    }, duration);
  }

  function renderCart() {
    const container = document.getElementById('cartContainer');
    const itemCount = Object.keys(cart).length;
    const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
    const totalPrice = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    document.getElementById('itemCount').textContent = `${itemCount} ${getWordForm(itemCount, ['—Ç–æ–≤–∞—Ä', '—Ç–æ–≤–∞—Ä–∞', '—Ç–æ–≤–∞—Ä–æ–≤'])}`;
    document.getElementById('totalItems').textContent = `${totalItems} ${getWordForm(totalItems, ['—à—Ç—É–∫–∞', '—à—Ç—É–∫–∏', '—à—Ç—É–∫'])}`;
    updateCartCount();

    if (itemCount === 0) {
      container.innerHTML = `
        <div class="empty-cart">
          <h3>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
          <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</p>
          <a href="catalog.html" class="shop-now-btn">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
        </div>
      `;
      return;
    }

    let cartItemsHTML = '';
    Object.entries(cart).forEach(([id, item]) => {
      const itemTotal = item.price * item.quantity;
      const imageUrl = productImages[item.id] || productImages[101];
      
      cartItemsHTML += `
        <div class="cart-item" data-id="${id}">
          <button class="remove-item" onclick="removeFromCart('${id}')">√ó</button>
          <img src="${imageUrl}" alt="${item.name}" class="item-image">
          <div class="item-details">
            <h3 class="item-name">${item.name}</h3>
            ${item.size ? `<div class="item-size">–†–∞–∑–º–µ—Ä: ${item.size}</div>` : ''}
            <div class="item-price">${item.price.toLocaleString()} ‚ÇΩ</div>
            <div class="item-quantity">
              <button class="quantity-btn" onclick="updateQuantity('${id}', ${item.quantity - 1})">‚àí</button>
              <input type="number" class="quantity-input" value="${item.quantity}" min="1" 
                     onchange="updateQuantity('${id}', this.value)">
              <button class="quantity-btn" onclick="updateQuantity('${id}', ${item.quantity + 1})">+</button>
            </div>
          </div>
          <div class="item-total">
            <div class="total-price">${itemTotal.toLocaleString()} ‚ÇΩ</div>
            <div class="per-item">${item.quantity} √ó ${item.price.toLocaleString()} ‚ÇΩ</div>
          </div>
        </div>
      `;
    });

    const shipping = totalPrice > 5000 ? 0 : 500;
    const finalTotal = totalPrice + shipping;

    container.innerHTML = `
      <div class="cart-layout">
        <div class="cart-items">
          ${cartItemsHTML}
          <div class="cart-actions">
            <button class="clear-cart-btn" onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
            <a href="catalog.html" class="continue-shopping">‚Üê –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</a>
          </div>
        </div>
        <div class="cart-summary">
          <h3 class="summary-title">–°–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞</h3>
          <div class="summary-row">
            <span>–¢–æ–≤–∞—Ä—ã (${totalItems} —à—Ç.)</span>
            <span>${totalPrice.toLocaleString()} ‚ÇΩ</span>
          </div>
          <div class="summary-row">
            <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
            <span>${shipping === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : shipping.toLocaleString() + ' ‚ÇΩ'}</span>
          </div>
          ${shipping > 0 ? `
            <div style="font-size: 0.9em; color: #2ecc71; margin: 10px 0; padding: 10px; background: #f0f9f0; border-radius: 6px;">
              üöö –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 5 000 ‚ÇΩ
            </div>
          ` : ''}
          <div class="summary-row total">
            <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ</span>
            <span>${finalTotal.toLocaleString()} ‚ÇΩ</span>
          </div>
          <button class="checkout-btn" onclick="window.location.href='checkout.html'">
            –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é
          </button>
          <a href="catalog.html" class="continue-shopping">–î–æ–±–∞–≤–∏—Ç—å –µ—â–µ —Ç–æ–≤–∞—Ä—ã</a>
        </div>
      </div>
    `;
  }

  function getWordForm(number, forms) {
    const cases = [2, 0, 1, 1, 1, 2];
    return forms[(number % 100 > 4 && number % 100 < 20) ? 2 : cases[(number % 10 < 5) ? number % 10 : 5]];
  }

  function updateQuantity(id, newQuantity) {
    newQuantity = parseInt(newQuantity);
    
    if (isNaN(newQuantity) || newQuantity < 1) {
      newQuantity = 1;
    }
    
    if (cart[id]) {
      cart[id].quantity = newQuantity;
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
      showNotification(`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ: ${newQuantity} —à—Ç.`);
    }
  }

  function removeFromCart(id) {
    if (cart[id]) {
      const itemName = cart[id].name;
      delete cart[id];
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
      showNotification(`"${itemName}" —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã`);
    }
  }

  function clearCart() {
    if (Object.keys(cart).length === 0) return;
    
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')) {
      cart = {};
      localStorage.removeItem('cart');
      renderCart();
      showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞');
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    renderCart();
    
    const style = document.createElement('style');
    style.textContent = `
      .cart-item {
        animation: fadeIn 0.5s ease;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  });

  window.updateQuantity = updateQuantity;
  window.removeFromCart = removeFromCart;
  window.clearCart = clearCart;
</script>
</body>
</html>